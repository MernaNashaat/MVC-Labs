@model List<Employee>
@{
    ViewBag.Title = "Employees";
}

<br />
<h1> Employees</h1>
<br />
@Html.ActionLink("+ Add New Employee", "EmployeeForm", null, new { @class = "btn btn-primary" })
<hr />
@if(TempData["message"]!=null)
{
    <div class="alert alert-info"> @TempData["message"]</div>
}
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>
            <th scope="col">Address</th>
            <th scope="col">Email</th>
            <th scope="col">Salary</th>
            <th scope="col">Gender</th>
            <th scope="col"></th>
        </tr>
    </thead>
    <tbody>

        @foreach (Employee emp in Model)
        {
            @Html.Partial("_EmployeeListPartial", emp)
        }

    </tbody>
</table>
@section Scripts
 {
    <script>

    function confirmDelete(id)
    {
        var res = confirm("Are You Sure you want to delete this employee ?")
        if (res) {
            $.ajax({
                url: "DeleteEmployee/" + id,
                method: 'POST',
                success: function (response) {
                    var tr = $(`#${id}`);
                    tr.remove();
                },
                error: function (xhr, status, err) {
                    console.log(err);
                    console.log('hi');

                }
            })
        }
    }
    </script>
}